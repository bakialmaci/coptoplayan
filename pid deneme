#define sags_echo 34
#define sags_trig 35

#define sols_echo 36
#define sols_trig 37

#define ons_echo 38
#define ons_trig 39

#define sol_motor1 40
#define sol_motor2 42
#define sol_pwm 44

#define sag_motor1 41
#define sag_motor2 43
#define sag_pwm 45

void setup()
{
  pinMode(sol_motor1, OUTPUT):
  pinMode(sol_motor2, OUTPUT);
  pinMode(sag_motor1, OUTPUT);
  pinMode(sag_motor2, OUTPUT);
  
  int hizmax;
  int kp = x ; //bunlar eklenecek
  int ki = x ;
  int kd = x ;
  int sure;
  int solmesafe;
  
  
}
void copuatma()
{
  
  sol_hiz = x // buraya başlangıç değeri girilecek
  sag_hiz = y // buraya başlangıç değeri girilecek
  
  digitalWrite(sol_motor1,HIGH) ;  //motorlara pid kontrolünde verilen hız
  digitalWrite(sol_motor2,LOW) ;
  analogWrite(sol_pwm,sol_hiz) ;
  
  digitalWrite(sag_motor1,HIGH) ;  
  digitalWrite(sag_motor2,LOW) ;
  analogWrite(sag_pwm,sag_hiz) ;
  
  soltakip();
  
}


int mesafeokuma(int trig, int echo)  //--- mesafe okuma
{  
  digitalWrite(trig,HIGH);
  delay(10);
  digitalWrite(trig,LOW);
  sure = pulseIn(echo, HIGH);
  solmesafe = sure /29.1/2;
  Serial.print("Uzaklık = ");
  Serial.println(solmesafe);
  delay(10);
  return solmesafe;
  }

int pid(int ideal, int solmesafe) {
  float pidTerm;
  int hata;
  static int son_hata;
  static int toplam_hata;
  hata = ideal - mesafe;
  toplam_hata += hata;
  pidTerm = (hata) * kp + (hata - son_hata) * kd + toplam_hata * ki;
  son_hata = hata;
  return (int(pidTerm));
}

void soltakip()
{
    if( pid < -hizmax)           // pid değerinin fazla yükselmesini veya fazla azalmasını engellemek için
    {
    pid = -hizmax;
    
  }
    if( pid > hizmax)
  {
    pid = hizmax;
    
  }

    if(pid < 0 ) //mesafe > ideal   
    {
		abs(pid);	
    sol_hiz = sol_hiz + pid;
    sag_hiz = sag_hiz - pid;
    }
    else if(pid > 0) // mesafe < ideal
    {
		abs(pid);
    sol_hiz = sol_hiz - pid;
    sag_hiz = sag_hiz + pid;
    
}
    else
    {
    sol_hiz = sol_hiz + pid; //boş kalırsa sıkıntı olur mu karar veremedik
    sag_hiz = sag_hiz + pid;
    }

  
}
